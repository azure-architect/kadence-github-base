function abTestManager(){const a=new Map,b=[],c="kad-ab-test-manager",d=a=>{const{id:b,variants:c}=a;if(!b)throw new Error("A test ID is required");if(!c||2>c.length)throw new Error("A test must have at least 2 variants");c.forEach(a=>{const{name:b,slug:c}=a;if(!b)throw new Error("A variant must have a name");if(!c)throw new Error("A variant must have a slug")})},e=()=>new Date().getTime(),f=()=>e()+31536000000,g=()=>{let a={};const b=localStorage.getItem(c);if(b){try{a=JSON.parse(b)}catch(a){console.error(a),localStorage.removeItem(c)}const d=e();try{const b=Object.values(a).filter(a=>a.expiration>d);b.length!==Object.values(a).length&&(a={},b.forEach(b=>{a[b.testId]=b}))}catch(b){a={},console.error(b),localStorage.removeItem(c)}}return 0<Object.values(a).length?a:{}},h=(a,b)=>{const d=g(),e=f();d[a]={testId:a,variantSlug:b,expiration:e},localStorage.setItem(c,JSON.stringify(d))},i=a=>{const b=g(),c=b[a];return!!c&&c.variantSlug};return{register:b=>{b=Object.assign({debug:!1,useDataLayer:!0},b);const c=new URLSearchParams(window.location.search),e=c.get("ab-test-debug");if(e&&(b.debug=!0),d(b),a.set(b.id,b),b.debug){const a=window.location.href.split("?")[0],c=b.variants.map(c=>`| Variant: ${c.name} (slug: ${c.slug}) => ${a}?ab-test=${b.id}&ab-variant=${c.slug}`);console.log(`[${b.id}]: Test registered: ${b.name}`,...c)}},run:c=>{const d=a.get(c);if(!d)return void console.log(`[${c}] No test by id`);const{variants:e,debug:f,onVariantRun:g,useDataLayer:j,dataLayerEventName:k}=d;let l;const m=new URLSearchParams(window.location.search),n=m.get("ab-test"),o=m.get("ab-variant"),p={usingURL:!1,usingLocalStorage:!1};if(n===c&&o){const a=e.find(a=>a.letter===o);a&&(l=a,p.usingURL=!0,f&&console.log(`[${c}] Variant chosen by URL parameter: ${null===l||void 0===l?void 0:l.name}`))}if(!l){const a=i(c);if(a){const b=e.find(b=>b.slug===a);b&&(p.usingLocalStorage=!0,l=b,f&&console.log(`[${c}] Variant chosen by local storage: ${null===l||void 0===l?void 0:l.name}`))}}if(!l){const a=Math.floor(Math.random()*e.length);l=e[a],h(c,l.slug),f&&console.log(`[${c}] Variant randomly chosen: ${null===l||void 0===l?void 0:l.name}`)}if(b.includes(c)&&f&&console.warn(`[${c}] Multiplte runs of test`),!l)return void console.log(`[${c}] No variant selected for test`);if(f&&console.log(`[${c}] Running...`),"function"==typeof l.onRun&&l.onRun(),g&&g(l,p),b.push(c),j){const a={event:k||"ABTest",testId:c,testName:d.name,variantSlug:l.slug,variantName:l.name};f&&console.log(`[${c}] Pushing data layer...`,a),window.dataLayer=window.dataLayer||[],window.dataLayer.push(a)}f&&console.log(`[${c}] Ready`)},deleteSavedVariant:a=>{const b=g();delete b[a],localStorage.setItem(c,JSON.stringify(b))}}}(function(){"undefined"==typeof kadenceABConfig&&(window.kadenceABConfig={ajax_url:"",ajax_nonce:"",gtag:!1,analytics:!0,items:[]});const a=JSON.parse(kadenceABConfig.items),b=["a","b","c","d","e","f","g","h"],c={},d="kad-ab-test-goal-manager",e="kad-ab-test-sales-manager",f=function(a="conversions"){let b={},c=d;"sales"===a?c=e:void 0;const f=localStorage.getItem(c);if(f)try{b=JSON.parse(f)}catch(a){console.error(a),localStorage.removeItem(c)}return 0<Object.values(b).length?b:{}},g=function(a,b){const c=f("conversions");c[b]={testId:a,goalSlug:b},localStorage.setItem(d,JSON.stringify(c))},h=function(a){const b=f("conversions"),c=b[a];return!!c&&c.goalSlug},i=function(a,b){const c=localStorage.getItem(e);if(c)try{const d=JSON.parse(c);d?.[a]&&d[a]===b||d&&(d[a]=b,localStorage.setItem(e,JSON.stringify(d)))}catch(c){console.log("error",c);const d={};d[a]=b,localStorage.setItem(e,JSON.stringify(d))}else{const c={};c[a]=b,localStorage.setItem(e,JSON.stringify(c))}},j=function(){const a=navigator.userAgent.toLowerCase(),b=window.innerWidth;return /mobile|android|iphone|ipod/.test(a)?"mobile":/ipad|tablet|kindle|playbook/.test(a)||480<b&&1024>=b?"tablet":"desktop"},k=function(a,b,c,d){if(kadenceABConfig?.gtag&&"function"==typeof gtag&&!kadenceABConfig.do_not_track&&gtag("event","ab_test_conversion",{event_category:"KadenceInsight",event_label:b.name,event_id:b.id,event_variant:c.slug}),kadenceABConfig?.analytics&&!d.usingURL&&!kadenceABConfig.do_not_track){const d=h(a.slug);d?n(["trigger"],b.id,c.slug,a.slug):(n(["converted","trigger"],b.id,c.slug,a.slug),g(b.id,a.slug))}},l=function(a,b,c,d){return function(){k(a,b,c,d)}},m=function(a,b,d,e,f){var g=a?a:document.querySelector(".kadence-ab-variation-"+e.slug);if(b?.slug)switch(c[d.id]?.["goals"]||(c[d.id].goals={}),c[d.id].goals[b.slug]=l(b,d,e,f),b.type){case"form":if(g.querySelector("form.frm-fluent-form")&&window?.jQuery&&jQuery(g).find("form.frm-fluent-form").on("fluentform_submission_success",function(a){c[d.id].goals[b.slug](a)}),g.querySelector(".gform_anchor")&&window?.jQuery){var h=g.querySelector(".gform_anchor").id;h=parseInt(h.replace(/\D/g,"")),jQuery(document).on("gform_confirmation_loaded",function(a,e){h===e&&c[d.id].goals[b.slug](a)})}window.document.body.addEventListener("kb-form-success",c[d.id].goals[b.slug],!1),window.document.body.addEventListener("kb-advanced-form-success",c[d.id].goals[b.slug],!1);break;case"time":setTimeout(function(){c[d.id].goals[b.slug]({})},Math.floor(1e3*b.time));break;case"sales":case"surecart":i(d.id,e.slug,b.slug);break;default:let a=".kadence-ab-variation-"+e.slug;if("outside"===b?.target&&(a="body"),b?.class)var j=document.querySelectorAll(a+" ."+b.class);else var j=document.querySelectorAll(a+" a[href],"+a+" button[type=\"submit\"],"+a+" input[type=\"submit\"]");if(!j.length)return;j.forEach(function(a){a.addEventListener("click",c[d.id].goals[b.slug],!1)})}},n=function(a,b,c,d=""){const e=new FormData;e.set("action","kadence_ab_test_event"),e.set("types",JSON.stringify(a)),e.set("id",b),e.set("variant",c),e.set("device",j()),d&&e.set("goal",d),e.set("_kadence_verify",kadenceABConfig.ajax_nonce);fetch(kadenceABConfig.ajax_url,{method:"POST",body:e}).then(a=>{if(200<=a.status&&400>a.status)return a.json()}).then(()=>{}).catch(function(){})},o=function(a,b,c){kadenceABConfig?.gtag&&"function"==typeof gtag&&!kadenceABConfig.do_not_track&&gtag("event","ab_test_viewed",{event_category:"KadenceInsight",event_label:a.name,event_id:a.id,event_variant:b.slug}),!kadenceABConfig?.analytics||c.usingURL||kadenceABConfig.do_not_track||(c.usingLocalStorage?n(["viewed"],a.id,b.slug):n(["placed","viewed"],a.id,b.slug))},p=function(a){c[a.id]={},c[a.id].itemData=a,c[a.id].experiment=abTestManager();for(var d=[],e=0;e<a.variants.length;e++)d.push({slug:a.variants[e].variantID,name:a.variants[e].name,letter:b[e]});c[a.id].experiment.register({id:a.id.toString(),name:a.name,debug:!1,variants:d,onVariantRun:(b,c)=>{var d=document.querySelectorAll(".kadence-insights-ab-test"+a.id),e=[];if(d.length){for(let f=0;f<d.length;f++)d[f].classList.add("kab-test-loaded"),e[f]=d[f].querySelector(".kadence-ab-variation-"+b.slug),e[f]&&(e[f].style.display="block",setTimeout(function(){e[f].classList.add("kad-ab-visible")},5),a?.goals?.length&&Object.keys(a.goals).forEach(function(d){m(e[f],a.goals[d],a,b,c)}));o(a,b,c)}}}),c[a.id].experiment.run(a.id.toString())},q=function(){a&&Object.keys(a).forEach(function(b){p(a[b])})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",q):q()})();