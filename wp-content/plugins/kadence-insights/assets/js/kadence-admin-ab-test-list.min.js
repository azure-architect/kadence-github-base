jQuery(document).ready(function(a){a(".refresh-usage-button").on("click",function(){const b=a(this).data("post-id"),c=a(this);c.prop("disabled",!0).addClass("loading"),a.ajax({url:refreshUsageData.ajax_url,type:"POST",data:{action:"kad_insights_ab_refresh_block_usage",nonce:refreshUsageData.nonce,post_id:b},success:function(a){if(a.success){const b=a.data.locations;let d=b.length?b.map(a=>`<a href="${a.edit_link}" target="_blank">${a.title}</a>`).join("<br>"):"Not used";c.closest(".kad-ab-usage").find(".kad-ab-usage-items").html(d)}else alert("Error: "+a.data.message)},error:function(){alert("An unexpected error occurred.")},complete:function(){c.prop("disabled",!1).removeClass("loading")}})})});