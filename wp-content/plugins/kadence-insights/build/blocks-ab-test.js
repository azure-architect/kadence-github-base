(()=>{var e,t={228:(e,t,n)=>{"use strict";const a=window.React,s=window.wp.i18n,i=window.wp.blocks,l=window.wp.blockEditor,c=window.wp.components,r=window.wp.data,o=window.wp.element,d=window.wp.coreData,u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"kadence-insights/ab-test-item","title":"A/B Test Item","category":"layout","description":"Single A/B test item.","supports":{"html":false,"inserter":false,"customClassName":false,"reusable":false,"lock":false,"kbMetadata":true,"kbContentLabel":"name"},"textdomain":"kadence-insights","keywords":["kb","a/b","test"],"parent":["kadence-insights/ab-test"],"attributes":{"variantID":{"type":"string"},"name":{"type":"string"}},"usesContext":["postId","kadence/variantsCount"]}');(0,i.registerBlockType)("kadence-insights/ab-test-item",{...u,title:(0,s.__)("A/B Test Item","kadence-insights"),description:(0,s._x)("Single A/B test item.","block description","kadence-insights"),icon:{src:(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 24 24"},(0,a.createElement)("path",{fill:"var(--kadence-color, #0058b0)",d:"M13.456 9.185l-1.894 6.775a.142.142 0 01-.14.115h-.644a.246.246 0 01-.037-.004.143.143 0 01-.099-.175l1.895-6.775a.142.142 0 01.14-.115h.646c.012 0 .025.002.037.004a.146.146 0 01.096.175zm4.428 6.566h-1.807c-.262 0-.448-.057-.558-.175-.113-.117-.168-.303-.168-.558v-4.447c0-.259.057-.448.172-.561.115-.115.299-.172.554-.172h1.918c.283 0 .526.018.733.053.207.037.393.101.559.202.14.083.262.189.372.317a1.392 1.392 0 01.331.913c0 .591-.296 1.026-.887 1.299.777.248 1.166.729 1.166 1.444 0 .331-.085.63-.256.894-.17.267-.397.462-.685.587a2.391 2.391 0 01-.62.158c-.24.032-.513.046-.824.046zm-.089-2.625h-1.249v1.726h1.288c.811 0 1.216-.292 1.216-.876 0-.299-.103-.515-.315-.65-.209-.134-.524-.2-.94-.2zm-1.249-2.389v1.529h1.099c.299 0 .529-.03.692-.085a.67.67 0 00.375-.322.729.729 0 00.101-.379c0-.299-.105-.497-.319-.596-.212-.099-.538-.147-.973-.147h-.975zm-8.534 4.345l-.283-.742H5.327l-.283.756c-.11.297-.204.497-.283.598-.078.103-.204.156-.381.156a.567.567 0 01-.4-.165.509.509 0 01-.173-.375c0-.081.014-.166.039-.251.028-.087.072-.204.134-.358l1.51-3.838c.044-.11.094-.241.157-.395.059-.156.124-.283.193-.386a.825.825 0 01.269-.249.817.817 0 01.413-.094c.168 0 .309.032.419.094.113.065.2.145.269.244s.126.207.172.322c.046.115.108.267.18.457l1.545 3.815c.121.289.181.501.181.632a.53.53 0 01-.17.377.562.562 0 01-.414.17.514.514 0 01-.411-.186 1.162 1.162 0 01-.145-.267c-.053-.119-.097-.225-.136-.315zm-2.37-1.644h1.766l-.89-2.437-.876 2.437zM1.736 2.379h20.528A1.74 1.74 0 0124 4.115v15.399c0 .954-.782 1.736-1.736 1.736H1.736A1.742 1.742 0 010 19.514V4.115a1.739 1.739 0 011.736-1.736zm20.687 3.42H1.653v13.333a.48.48 0 00.481.481h19.799a.478.478 0 00.481-.481V5.799h.009z"}))},edit:function(e){const{attributes:t,clientId:n,setAttributes:i,context:d}=e,{variantID:u,name:m}=t,{addUniqueVariant:p}=(0,r.useDispatch)("kadenceInsight/data"),{isUniqueVariant:g,isUniqueVariantBlock:k}=(0,r.useSelect)((e=>({isUniqueVariant:(t,n)=>e("kadenceInsight/data").isUniqueVariant(t,n),isUniqueVariantBlock:(t,n,a)=>e("kadenceInsight/data").isUniqueVariantBlock(t,n,a)})),[n]),{abTestBlock:h,rootID:_,rootPostId:b}=(0,r.useSelect)((e=>{const{getBlockRootClientId:t,getBlocksByClientId:a}=e(l.store),s=t(n),i=a(s),c=i?.[0]?.attributes?.id;return{abTestBlock:void 0!==i?i:"",rootID:void 0!==s?s:"",rootPostId:void 0!==c?c:""}}),[n]);(0,o.useEffect)((()=>{if(!u){let e=b+"-"+n.substr(2,6);i({variantID:e})}m||i({name:(0,s.__)("Variant","kadence-insights")+" "+(d["kadence/variantsCount"]?d["kadence/variantsCount"]:1)})}),[n]);const v=(0,r.useSelect)((e=>e(l.store).getBlocks(n).length>0),[n]),E=(0,l.useBlockProps)({className:`kadence-ab-test-item-inner kadence-ab-test-item-inner-${u}`}),y=(0,l.useInnerBlocksProps)({className:"kadence-ab-test-inner"},{templateLock:!1,renderAppender:v?void 0:l.InnerBlocks.ButtonBlockAppender});return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(c.PanelBody,{title:(0,s.__)("A/B Item Setup","kadence-insights"),initialOpen:!0},(0,a.createElement)(c.TextControl,{label:(0,s.__)("Variant Name","kadence-insights"),value:m,onChange:e=>{i({name:e})}}))),(0,a.createElement)("div",{...E},(0,a.createElement)("div",{...y})))},save:()=>(0,a.createElement)(l.InnerBlocks.Content,null)});const m=window.lodash,p={previewDevice:"Desktop",uniqueIDs:{},uniqueVariants:{}},g={*setPreviewDeviceType(e){if(!(yield{type:"SET_PREVIEW_DEVICE_TYPE_FOR_CORE",deviceType:e}))return{type:"SET_PREVIEW_DEVICE_TYPE",deviceType:e}},addUniqueID:(e,t)=>({type:"ADD_UNIQUE_ID",uniqueID:e,clientID:t}),addUniqueVariant:(e,t,n)=>({type:"ADD_UNIQUE_VARIANT",uniqueID:e,clientID:t,rootID:n})},k={SET_PREVIEW_DEVICE_TYPE_FOR_CORE:(0,r.createRegistryControl)((e=>function({deviceType:t}){const n=e.dispatch("core/edit-post");if(n)return n.__experimentalSetPreviewDeviceType(t),!0;const a=e.dispatch("core/edit-site");return!!a&&(a.__experimentalSetPreviewDeviceType(t),!0)}))},h=(0,r.createRegistrySelector)((e=>t=>{const n=e("core/editor");if(n&&n?.getDeviceType)return n.getDeviceType();const a=e("core/edit-post");if(a)return a.__experimentalGetPreviewDeviceType();const s=e("core/edit-site");return s?s.__experimentalGetPreviewDeviceType():t.previewDevice})),_=(0,r.createReduxStore)("kadenceInsight/data",{reducer(e=p,t){switch(t.type){case"SET_PREVIEW_DEVICE_TYPE":return{...e,previewDevice:t.deviceType};case"ADD_UNIQUE_ID":const n=e.uniqueIDs;return Object.assign(n,{[t.uniqueID]:t.clientID}),{...e,uniqueIDs:n};case"ADD_UNIQUE_VARIANT":const a=e.uniqueVariants;return a.hasOwnProperty(t.rootID)?Object.assign(a[t.rootID],{[t.uniqueID.toString()]:t.clientID}):(a[t.rootID]={},Object.assign(a[t.rootID],{[t.uniqueID.toString()]:t.clientID})),{...e,uniqueVariants:a};default:return e}},actions:g,controls:k,selectors:{getPreviewDeviceType:h,getUniqueIDs(e){const{uniqueIDs:t}=e;return t},isUniqueID(e,t){const{uniqueIDs:n}=e;let a=!0;return n.hasOwnProperty(t)&&(a=!1),a},isUniqueBlock(e,t,n){const{uniqueIDs:a}=e;let s=!1;return a.hasOwnProperty(t)&&a[t]===n&&(s=!0),s},isUniqueVariant(e,t,n){const{uniqueVariants:a}=e;let s=!0;return a.hasOwnProperty(n)&&a[n].hasOwnProperty(t.toString())&&(s=!1),s},isUniqueVariantBlock(e,t,n,a){const{uniqueVariants:s}=e;let i=!1;return s.hasOwnProperty(a)&&s[a].hasOwnProperty(t.toString())&&s[a][t.toString()]===n&&(i=!0),i}}});(0,r.register)(_);const b=window.wp.plugins,v=window.wp.editor,E=window.wp.apiFetch;var y=n.n(E);const w=window.wp.primitives,f=(0,a.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(w.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})),B=(0,a.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(w.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"}));function C(e,t="post",n="New Campaign"){const[a,s]=(0,o.useState)(!1),{receiveEntityRecords:i}=(0,r.useDispatch)(d.store);return[a,async()=>{s(!0);try{const a=await y()({method:"POST",path:`/wp/v2/${e}/auto-draft`,data:{post_type:t}});i("postType",a.type,[a]);const l=a.id;try{const t=await y()({method:"POST",path:`/wp/v2/${e}/${l}`,data:{status:"publish",title:n}});return i("postType",t.type,[t]),t}finally{s(!1)}}finally{s(!1)}}]}function I({label:e,value:t,onChange:n,min:s,max:i,step:l=1}){return[n&&(0,a.createElement)("div",{className:"components-base-control"},(0,a.createElement)("p",{className:"components-base-control__label"},e),(0,a.createElement)("div",{className:"components-base-control__field kab-flex-center kab-step-control"},(0,a.createElement)(c.Button,{className:"kb-step-btn",icon:f,variant:"secondary",onClick:()=>{t>s&&n(t-l)}}),(0,a.createElement)("input",{className:"components-step-control__number",type:"number",onChange:e=>n(Number(e.target.value)),"aria-label":e,value:t,min:s,max:i,step:l}),(0,a.createElement)(c.Button,{className:"kb-step-btn",variant:"secondary",icon:B,onClick:()=>{t<i&&n(t+l)}})))]}function S(e){const{label:t,onChange:n,value:i,postType:l="post",hideLabelFromVision:o=!1,overrideLabel:d=null}=e,{posts:u}=(0,r.useSelect)((e=>({posts:e("core").getEntityRecords("postType",l,{per_page:-1,orderby:"title",order:"asc"})})),[l]),m=[...(u||[]).map((e=>({label:null!==d&&i===e.id?d:T(e.title.raw),value:e.id})))];return!(i&&m.some((e=>e.value===i)))&&i&&m.push({label:null!==d?d:(0,s.__)("Unknown Selection","kadence-insights"),value:i}),(0,a.createElement)(c.SelectControl,{label:t,options:m,onChange:n,value:i,hideLabelFromVision:o})}function T(e){const t=(e=e||"").replace(/<!--[\s\S]*?(-->|$)/g,"").replace(/<(script|style)[^>]*>[\s\S]*?(<\/\1>|$)/gi,"").replace(/<\/?[a-z][\s\S]*?(>|$)/gi,"");return t!==e?T(t):t}function x({onSelect:e,isSelecting:t,onAdd:n,isAdding:i,title:l,setTitle:d,postType:u="post",label:m=(0,s.__)("Post"),instructions:p=(0,s.__)("Select an existing post or create a new one.","kadence-insights"),placeholder:g=(0,s.__)("Select Post","kadence-insights")}){const[k,h]=(0,o.useState)(0),[_,b]=(0,o.useState)(!1),{posts:v}=(0,r.useSelect)((e=>({posts:e("core").getEntityRecords("postType",u,{per_page:-1,orderby:"title",order:"asc"})})),[u]),E=[{label:g,value:0},...(v||[]).map((e=>({label:T(e.title.rendered),value:e.id})))];return"undefined"==typeof pagenow||"widgets"!==pagenow&&"customize"!==pagenow?_?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.TextControl,{label:(0,s.__)("Campaign Name","kadence-insights"),value:l,onChange:e=>{d(e)}}),(0,a.createElement)(c.Button,{variant:"primary",onClick:n,disabled:""===l,isBusy:i},(0,s.__)("Get Started","kadence-insights"))):(0,a.createElement)("div",{className:"components-placeholder"},m&&(0,a.createElement)("div",{class:"kadence-ab-intro__label components-placeholder__label"},m),p&&(0,a.createElement)("div",{class:"kadence-ab-intro__info components-placeholder__instructions"},p),(0,a.createElement)("form",{className:"kadence-ab-select-or-create-placeholder__actions"},(0,a.createElement)(c.SelectControl,{label:m,hideLabelFromVision:!0,options:E,onChange:h,value:k}),(0,a.createElement)(c.Button,{variant:"primary",type:"submit",disabled:!k||i,isBusy:t,onClick:()=>e(Number.parseInt(k))},(0,s.__)("Select","kadence-insights")),(0,a.createElement)(c.Button,{variant:"secondary",onClick:()=>b(!0),disabled:t},(0,s.__)("Create New","kadence-insights")))):(0,a.createElement)("div",{className:"components-placeholder"},m&&(0,a.createElement)("div",{class:"kadence-ab-intro__label components-placeholder__label"},m),p&&(0,a.createElement)("div",{class:"kadence-ab-intro__info components-placeholder__instructions"},p),(0,a.createElement)("form",{className:"kadence-ab-select-or-create-placeholder__actions"},(0,a.createElement)(c.SelectControl,{label:m,hideLabelFromVision:!0,options:E,onChange:h,value:k}),(0,a.createElement)(c.Button,{variant:"primary",type:"submit",disabled:!k||i,isBusy:t,onClick:()=>e(Number.parseInt(k))},(0,s.__)("Select","kadence-insights"))))}const D=window.wp.notices,V=["core/group","core/row","core/grid","core/columns","core/cover","core/heading","core/paragraph","core/list","core/image","core/gallery","core/quote","core/pullquote","core/buttons","core/button","kadence/rowlayout","kadence/column","kadence/icon","kadence/advancedheading","kadence/infobox","kadence/advancedgallery","kadence/advancedbtn","kadence/tabs","kadence/accordion","kadence/iconlist","kadence/form","kadence/image"];function A({className:e="patterns-menu-items__convert-modal",...t}){return(0,a.createElement)(c.Modal,{title:(0,s.__)("Add New A/B Test","kadence-insights"),onRequestClose:t.onClose,overlayClassName:e,focusOnMount:"firstContentElement",size:"small"},(0,a.createElement)(N,{...t}))}function N({confirmLabel:e=(0,s.__)("Create","kadence-insights"),onClose:t,onError:n,onSuccess:l,defaultTitle:u=""}){const[m,p]=(0,o.useState)(u),[g,k]=(0,o.useState)(0),[h,_]=(0,o.useState)(!1),{createErrorNotice:b}=(0,r.useDispatch)(D.store),[v,E]=C("kadence_ab_test","kadence_ab_test",m);let[y,w,f]=(0,d.useEntityBlockEditor)("postType","kadence_ab_test",{id:g});return(0,o.useEffect)((()=>{g&&(async e=>{const t=(0,i.createBlock)("kadence-insights/ab-test",{id:e,visibleVariant:1},[]);l({wrapperBlock:t,onChange:f})})(g)}),[g]),(0,a.createElement)("form",{onSubmit:e=>{e.preventDefault(),async function(){if(m&&!h)try{_(!0);const e=await E();k(e.id)}catch(e){b(e.message,{type:"snackbar",id:"ab-test-create"}),n?.()}finally{_(!1),p("")}}()}},(0,a.createElement)(c.__experimentalVStack,{spacing:"5"},(0,a.createElement)(c.TextControl,{label:(0,s.__)("Campaign Name","kadence-insights"),value:m,onChange:p,className:"patterns-create-modal__name-input",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,a.createElement)(c.__experimentalHStack,{justify:"right"},(0,a.createElement)(c.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{t(),p("")}},(0,s.__)("Cancel","kadence-insights")),(0,a.createElement)(c.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!m||h,isBusy:h},e))))}(0,b.registerPlugin)("ki-ab-wrap-block",{render(){const{createSuccessNotice:e,createErrorNotice:t}=(0,r.useDispatch)(D.store),{replaceBlocks:n,canInsertBlockType:l,getBlockRootClientId:c,getBlocksByClientId:u}=(0,r.useDispatch)(v.store),[m,p]=(0,o.useState)(!1);return(0,r.useSelect)((e=>{const{canUser:t}=e(d.store);return!!t("create",{kind:"postType",name:"kadence_ab_test"})}),[])?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(v.PluginBlockSettingsMenuItem,{allowedBlocks:V,icon:(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 24 24"},(0,a.createElement)("path",{fill:"var(--kadence-color, #0058b0)",d:"M1.475 5.59l-.069 4.599v9.633a.408.408 0 00.408.408h16.821a.406.406 0 00.408-.408l1.346.002v.322c0 .813-.664 1.475-1.475 1.475H1.475A1.477 1.477 0 010 20.146V7.064c0-.81.664-1.474 1.475-1.474zm13.568 3.34l-1.609 5.756a.123.123 0 01-.12.097h-.546a.12.12 0 01-.116-.152l1.61-5.756a.12.12 0 01.119-.098h.549c.009 0 .021.002.031.004.06.02.1.086.082.149zm3.762 5.578H17.27c-.223 0-.381-.049-.475-.149-.096-.099-.143-.257-.143-.474v-3.778c0-.22.049-.38.147-.476.097-.098.254-.147.471-.147h1.628c.241 0 .448.016.623.045.176.032.334.086.475.172a1.247 1.247 0 01.525.629c.049.133.073.27.073.416 0 .502-.252.871-.754 1.104.66.211.99.619.99 1.226 0 .281-.072.535-.217.76a1.276 1.276 0 01-.582.498 2.04 2.04 0 01-.527.135 5.376 5.376 0 01-.699.039zm-.076-2.231h-1.061v1.467h1.094c.689 0 1.033-.248 1.033-.744 0-.254-.088-.438-.268-.553-.177-.113-.445-.17-.798-.17zm-1.061-2.029v1.299h.934c.253 0 .449-.026.587-.072a.568.568 0 00.319-.274.628.628 0 00.086-.322c0-.254-.09-.422-.272-.506-.179-.084-.457-.125-.826-.125h-.828zm-7.25 3.691l-.24-.63H8.137l-.241.642c-.093.252-.173.422-.24.508-.066.088-.174.133-.324.133a.483.483 0 01-.34-.141.432.432 0 01-.146-.318c0-.069.011-.141.033-.213.023-.074.06-.174.113-.305l1.283-3.26c.038-.093.08-.205.133-.335.051-.133.106-.241.164-.329a.703.703 0 01.229-.211.698.698 0 01.351-.08.73.73 0 01.356.08c.096.055.17.124.228.207.059.084.108.176.147.274.039.098.092.226.152.389l1.313 3.24c.103.246.154.426.154.537a.45.45 0 01-.145.32.474.474 0 01-.351.145.444.444 0 01-.205-.043.45.45 0 01-.145-.115 1.006 1.006 0 01-.123-.227c-.045-.102-.082-.191-.115-.268zm-2.014-1.396h1.5l-.756-2.07-.744 2.07zM5.086 2.379h17.439c.813 0 1.475.664 1.475 1.475v13.082a1.48 1.48 0 01-1.475 1.474H5.086a1.48 1.48 0 01-1.475-1.474V3.854a1.477 1.477 0 011.475-1.475zm17.574 4.6H5.016v9.632a.408.408 0 00.408.409h16.82a.407.407 0 00.408-.409V6.979h.008zm-1.539-2.942a.73.73 0 110 1.458.73.73 0 010-1.458zm-4.939 0a.728.728 0 110 1.457.728.728 0 010-1.457zm2.468 0a.729.729 0 11.001 1.457.729.729 0 01-.001-1.457z"})),label:(0,s.__)("Create A/B Test","kadence-insights"),onClick:()=>{const e=(0,r.select)("core/block-editor").getSelectedBlock();if(!e)return void t((0,s.__)("Please select one block","kadence-insights"),{type:"snackbar"});const n=(0,r.select)("core/block-editor").getBlockRootClientId(e.clientId);(0,r.select)("core/block-editor").getBlockParentsByBlockName(e.clientId,"kadence-insights/ab-test-item").length>0?t((0,s.__)("Do not add an A/B test inside of an A/B test.","kadence-insights"),{type:"snackbar"}):(0,r.select)("core/block-editor").canInsertBlockType("kadence-insights/ab-test",n)?p(!0):t((0,s.__)("Choose outer container block, nested columns can not be converted.","kadence-insights"),{type:"snackbar"})}}),m&&(0,a.createElement)(A,{onSuccess:a=>{(({wrapperBlock:a,onChange:l})=>{const c=(0,r.select)("core/block-editor").getSelectedBlock();if(c&&a||t((0,s.__)("Failed to create A/B test"),{type:"snackbar",id:"ab-test-create"}),a){const t=(0,i.createBlock)(c.name,c.attributes,c.innerBlocks);l([(0,i.createBlock)("kadence-insights/ab-test",{},[(0,i.createBlock)("kadence-insights/ab-test-item",{name:(0,s.__)("Variant A","kadence-insights")},[t]),(0,i.createBlock)("kadence-insights/ab-test-item",{name:(0,s.__)("Variant B","kadence-insights")},[t])])],a.clientId),n(c.clientId,a),e((0,s.__)("A/B Test Created"),{type:"snackbar",id:"create-ab-success"})}p(!1)})(a)},onError:()=>{p(!1)},onClose:()=>{p(!1)}})):null}});var P=n(942),z=n.n(P);const M=window.wp.url,O=(0,a.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(w.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),R=(0,a.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(w.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),q=(0,a.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(w.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),H=/[\s#]/g,L=(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 24 24"},(0,a.createElement)("path",{fill:"rgba(150,150,150, 0.5)",d:"M1.475 5.59l-.069 4.599v9.633a.408.408 0 00.408.408h16.821a.406.406 0 00.408-.408l1.346.002v.322c0 .813-.664 1.475-1.475 1.475H1.475A1.477 1.477 0 010 20.146V7.064c0-.81.664-1.474 1.475-1.474zm13.568 3.34l-1.609 5.756a.123.123 0 01-.12.097h-.546a.12.12 0 01-.116-.152l1.61-5.756a.12.12 0 01.119-.098h.549c.009 0 .021.002.031.004.06.02.1.086.082.149zm3.762 5.578H17.27c-.223 0-.381-.049-.475-.149-.096-.099-.143-.257-.143-.474v-3.778c0-.22.049-.38.147-.476.097-.098.254-.147.471-.147h1.628c.241 0 .448.016.623.045.176.032.334.086.475.172a1.247 1.247 0 01.525.629c.049.133.073.27.073.416 0 .502-.252.871-.754 1.104.66.211.99.619.99 1.226 0 .281-.072.535-.217.76a1.276 1.276 0 01-.582.498 2.04 2.04 0 01-.527.135 5.376 5.376 0 01-.699.039zm-.076-2.231h-1.061v1.467h1.094c.689 0 1.033-.248 1.033-.744 0-.254-.088-.438-.268-.553-.177-.113-.445-.17-.798-.17zm-1.061-2.029v1.299h.934c.253 0 .449-.026.587-.072a.568.568 0 00.319-.274.628.628 0 00.086-.322c0-.254-.09-.422-.272-.506-.179-.084-.457-.125-.826-.125h-.828zm-7.25 3.691l-.24-.63H8.137l-.241.642c-.093.252-.173.422-.24.508-.066.088-.174.133-.324.133a.483.483 0 01-.34-.141.432.432 0 01-.146-.318c0-.069.011-.141.033-.213.023-.074.06-.174.113-.305l1.283-3.26c.038-.093.08-.205.133-.335.051-.133.106-.241.164-.329a.703.703 0 01.229-.211.698.698 0 01.351-.08.73.73 0 01.356.08c.096.055.17.124.228.207.059.084.108.176.147.274.039.098.092.226.152.389l1.313 3.24c.103.246.154.426.154.537a.45.45 0 01-.145.32.474.474 0 01-.351.145.444.444 0 01-.205-.043.45.45 0 01-.145-.115 1.006 1.006 0 01-.123-.227c-.045-.102-.082-.191-.115-.268zm-2.014-1.396h1.5l-.756-2.07-.744 2.07zM5.086 2.379h17.439c.813 0 1.475.664 1.475 1.475v13.082a1.48 1.48 0 01-1.475 1.474H5.086a1.48 1.48 0 01-1.475-1.474V3.854a1.477 1.477 0 011.475-1.475zm17.574 4.6H5.016v9.632a.408.408 0 00.408.409h16.82a.407.407 0 00.408-.409V6.979h.008zm-1.539-2.942a.73.73 0 110 1.458.73.73 0 010-1.458zm-4.939 0a.728.728 0 110 1.457.728.728 0 010-1.457zm2.468 0a.729.729 0 11.001 1.457.729.729 0 01-.001-1.457z"}));function U(e){return(0,d.useEntityProp)("postType","kadence_ab_test",e)}function F(e){const{attributes:t,setAttributes:n,clientId:u,direct:p,id:g,isSelected:k}=e,{visibleVariant:h}=t,[_,b]=U("meta"),[E,y]=(0,o.useState)(!1),w={variants:_?._kad_ab_variants,variants_count:_?._kad_ab_variants_count,goals:_?._kad_ab_goals,customClasses:_?._kad_ab_custom_classes},f=h||0,B=(e,t)=>{b({..._,["_kad_ab_"+t]:e})},[C,T]=U("title"),{variants:x,goals:D,customClasses:V,variants_count:A}=w,{getBlocks:N}=(0,r.useSelect)(l.store),{replaceInnerBlocks:P,replaceBlocks:F,updateBlockAttributes:G}=(0,r.useDispatch)(l.store);let[j,$,Q]=(0,d.useEntityBlockEditor)("postType","kadence_ab_test",g);const W=(0,o.useMemo)((()=>[(0,i.createBlock)("kadence-insights/ab-test",{})]),[u]),Z=(0,r.useSelect)((e=>e(v.store).getPermalink()),[]);0===j.length&&(j=W);const[Y,J]=(0,o.useState)(!1),K=()=>{setTimeout((()=>{J(!1)}),100)},X=(0,o.useMemo)((()=>(0,m.get)(j,[0,"innerBlocks"],[])),[j]),{variantsCount:ee,abTestInnerBlocks:te}=(0,r.useSelect)((e=>{const{getBlockCount:t,getBlocks:n}=e(l.store);return{variantsCount:t(u),abTestInnerBlocks:n(u)}}),[u]);function ne(e,t){let a=N(u);t>e?a=[...a,...Array.from({length:t-e}).map((()=>(0,i.createBlock)("kadence-insights/ab-test-item")))]:t<e&&(a=a.slice(0,-(e-t))),B(a.length,"variants_count"),n({variantsCount:a.length}),P(u,a)}const ae=(0,a.createElement)("style",null,`\n\t\t\t.kadence-ab-test-${g} .kadence-ab-test-item-inner:nth-child(${f+1}){\n\t\t\t\tdisplay: block;\n\t\t\t}`),se=(0,o.useMemo)((()=>(0,m.get)(j,[0],{})),[j]);(0,o.useEffect)((()=>{if(Array.isArray(te)&&te.length){const e=function(e){if(Array.isArray(e)&&e.length){let t=[];return e.forEach((e=>{"kadence-insights/ab-test-item"===e.name&&t.push({variantID:e?.attributes?.variantID||"",name:e?.attributes?.name||""})})),t}return[]}(te);!function(e,t,n){if(Array.isArray(e)&&e.length){const a=[];e.forEach((e=>{let i=e?.attributes?.variantID||"";a.includes(i)&&(i=n+"-"+e.clientId.substr(2,6),console.log("Duplicate uniqueID found, updating to: "+i),t(e.clientId,{variantID:i,name:(e?.attributes?.name?e?.attributes?.name:"")+" "+(0,s.__)("Copy","kadence-insights")})),a.push(i)}))}}(te,G,g),(0,m.isEqual)(x,e)||(B(e,"variants"),(0,m.isEqual)(A,te.length)||(B(te.length,"variants_count"),n({variantsCount:te.length})))}}),[te]);const ie=(e,t)=>{const n=D.map(((n,a)=>(t===a&&(n={...n,...e}),n)));B(n,"goals")};(0,o.useEffect)((()=>{Array.isArray(D)&&D.length&&(D[0]?.slug||ie({slug:g+"-"+D.length+"-"+Math.floor(1e3*Math.random())},0))}),[u]);const le=z()({"kadence-ab-test-wrap-inner":!0}),ce=(0,l.useInnerBlocksProps)({className:le},{allowedBlocks:["kadence-insights/ab-test-item"],orientation:"horizontal",renderAppender:!1,value:p?void 0:X,onInput:p?void 0:(e,t)=>$([{...se,innerBlocks:e}],t),onChange:p?void 0:(e,t)=>Q([{...se,innerBlocks:e}],t),templateLock:!1}),re={0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J"};if(p&&0===X.length)return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kadence-ab-intro-wrapper"},(0,a.createElement)(c.Button,{variant:"primary",onClick:()=>ne(ee,1)},(0,s.__)("Create Variant","kadence-insights"))),(0,a.createElement)("div",{className:"kb-ab-test-hide-while-setting-up",style:{display:"none"}},(0,a.createElement)("div",{...ce})));if("undefined"!=typeof pagenow&&("widgets"===pagenow||"customize"===pagenow)){const e=(0,M.addQueryArgs)("post.php",{post:g,action:"edit"});return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kadence-ab-intro-wrapper"},(0,a.createElement)("div",{className:"components-placeholder"},(0,a.createElement)("div",{class:"kadence-ab-intro__label components-placeholder__label"},(0,s.__)("Kadence A/B Test","kadence-insights")),(0,a.createElement)("p",{style:{width:"100%",marginBottom:"10px"}},(0,s.__)("Kadence A/B tests can not be edited within the widgets screen.","kadence-insights")),(0,a.createElement)(c.Button,{href:e,variant:"primary",className:"kb-form-edit-link"},(0,s.__)("Edit","kadence-insights")))),(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(c.PanelBody,{panelName:"kb-ab-test-selected-switch",title:(0,s.__)("Selected A/B Test","kadence-insights")},(0,a.createElement)(S,{postType:"kadence_ab_test",label:(0,s.__)("Selected A/B Test","kadence-insights"),hideLabelFromVision:!0,onChange:e=>{n({id:parseInt(e)})},value:g}))))}return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(l.BlockControls,null,(0,a.createElement)(c.ToolbarGroup,{group:"variations"},ee<5&&(0,a.createElement)(a.Fragment,null,x.map(((e,t)=>(0,a.createElement)(c.ToolbarButton,{className:"kab-variation-select",onClick:()=>{n({visibleVariant:t})},isPressed:f===t,label:e.name||(0,s.__)("Variant","kadence-insights")+" "+(t+1),text:re[t],showTooltip:!0})))),ee>4&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.Dropdown,{label:(0,s.__)("Visible Variant","kadence-insights"),renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(c.ToolbarButton,{className:"kab-variation-select",onClick:t,label:(0,s.__)("Choose the visible variant","kadence-insights"),text:re[f],showTooltip:!0}),renderContent:({isOpen:e,onToggle:t})=>(0,a.createElement)(c.MenuGroup,{className:"kab-variation-menu"},(0,m.times)(x.length,(e=>(0,a.createElement)(c.MenuItem,{onClick:()=>{n({visibleVariant:e}),t()},isPressed:f===e},x?.[e]?.name||(0,s.__)("Variant","kadence-insights")+" "+(e+1)))))}))),!p&&ee>1&&(0,a.createElement)(c.ToolbarGroup,{group:"winner"},(0,a.createElement)(c.ToolbarButton,{className:"kab-variation-select",onClick:()=>Y?K():J(!0),label:(0,s.__)("Choose the Winner","kadence-insights"),icon:R,showTooltip:!0}),Y&&(0,a.createElement)(c.Modal,{title:(0,s.__)("Choose the winning variant","kadence-insights"),onRequestClose:()=>K(),overlayClassName:"kab-variation-select-modal",focusOnMount:!0,size:"small"},(0,a.createElement)(c.MenuGroup,{className:"kab-variation-menu-winner"},(0,m.times)(x.length,(e=>(0,a.createElement)(c.MenuItem,{onClick:()=>{F(u,X[e].innerBlocks),K()}},x?.[e]?.name||(0,s.__)("Variant","kadence-insights")+" "+(e+1))))),(0,a.createElement)(c.__experimentalHStack,{justify:"right"},(0,a.createElement)(c.Button,{__next40pxDefaultSize:!0,variant:"primary",onClick:()=>{K()}},(0,s.__)("Cancel","kadence-insights")))))),(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(c.PanelBody,{title:(0,s.__)("A/B Campaign Setup","kadence-insights"),initialOpen:!0},(0,a.createElement)(c.TextControl,{label:(0,s.__)("Campaign Name","kadence-insights"),value:C||"",onChange:e=>{T(e)}}),(0,a.createElement)(I,{label:(0,s.__)("Variants","kadence-insights"),value:ee,onChange:e=>ne(ee,Math.max(1,e)),min:1,max:Math.max(6,ee)}),ee>4&&(0,a.createElement)(c.Notice,{status:"warning",isDismissible:!1},(0,s.__)("This exceeds the recommended amount of variants.","kadence-insights")),ee<1&&(0,a.createElement)(c.Notice,{status:"warning",isDismissible:!1},(0,s.__)("Please add more then one variant.","kadence-insights")),(0,m.times)(D.length,(e=>(e=>{let t=void 0!==D[e].label&&null!==D[e].label&&""!==D[e].label?D[e].label:(0,s.__)("Goal Metric","kadence-insights")+" "+(e+1);return 0==e&&(t=t+" "+(0,s.__)("(Primary)","kadence-insights")),(0,a.createElement)(c.PanelBody,{title:t,initialOpen:!1,key:"field-panel-"+e.toString(),panelName:"kad-goal-panel-"+e,className:"kadence-ab-goal-panel"},(0,a.createElement)(c.TextControl,{label:(0,s.__)("Goal Label","kadence-insights"),placeholder:(0,s.__)("Goal Metric","kadence-insights")+" "+(e+1),value:void 0!==D[e].label?D[e].label:"",onChange:t=>ie({label:t},e)}),(0,a.createElement)(c.SelectControl,{label:(0,s.__)("Goal Type","kadence-insights"),value:D[e].type,options:[{value:"click",label:(0,s.__)("Link/Button Click","kadence-insights")},{value:"form",label:(0,s.__)("Submit Form","kadence-insights")},{value:"time",label:(0,s.__)("Time Spent on Page","kadence-insights")},{value:"sales",label:(0,s.__)("WooCommerce Sales","kadence-insights")},{value:"surecart",label:(0,s.__)("SureCart Sales","kadence-insights")}],onChange:t=>{ie({type:t},e)}}),"click"===D[e].type&&(0,a.createElement)(c.TextControl,{label:(0,s.__)("Goal specific class (Optional)","kadence-insights"),help:(0,s.__)("Here define a specific class which will be the only class that triggers a conversion, leave blank for any click inside the variation.","kadence-insights"),value:D[e].class||"",onChange:t=>{t=t.replace(H,"-"),ie({class:t},e)}}),"time"===D[e].type&&(0,a.createElement)(c.RangeControl,{label:(0,s.__)("Trigger after x seconds","kadence-insights"),value:D[e].time,onChange:t=>{ie({time:t},e)},min:1,max:200,step:1}),"time"!==D[e].type&&"sales"!==D[e].type&&"surecart"!==D[e].type&&(0,a.createElement)(c.SelectControl,{label:(0,s.__)("Target area","kadence-insights"),value:D[e].target,options:[{value:"inside",label:(0,s.__)("Inside Block","kadence-insights")},{value:"outside",label:(0,s.__)("Anywhere on page","kadence-insights")}],onChange:t=>{ie({target:t},e)}}),"click"===D[e].type&&"outside"===D[e]?.target&&""===D[e].class&&(0,a.createElement)(c.Notice,{status:"warning",isDismissible:!1},(0,s.__)("It is strongly suggested that you target a custom class instead of any link/button click on an entire page.","kadence-insights")),(0,a.createElement)(c.Button,{icon:O,className:"kad-remove-goal",onClick:()=>(e=>{const t=(0,m.filter)(D,((t,n)=>e!==n));B(t,"goals")})(e),variant:"secondary",isDestructive:!0,text:(0,s.__)("Remove Goal Metric","kadence-insights")}))})(e))),D?.length<1&&(0,a.createElement)(c.Notice,{status:"warning",isDismissible:!1},(0,s.__)("Please add at least one AB Test Goal.","kadence-insights")),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.Button,{className:"kad-add-goal",variant:"secondary",icon:q,text:(0,s.__)("Add Goal","kadence-insights"),onClick:()=>{const e=D;e.push({label:"",type:"click",target:"inside",class:"",time:20,slug:g+"-"+D.length+"-"+Math.floor(1e3*Math.random())}),B(e,"goals"),y(!E)}}))),!p&&Z&&ee>1&&(0,a.createElement)(c.PanelBody,{title:(0,s.__)("Preview Variants","kadence-insights"),initialOpen:!1},(0,m.times)(x.length,(e=>(0,a.createElement)("div",{className:"kadence-ab-test-preview"},(0,a.createElement)(c.ExternalLink,{href:(0,M.addQueryArgs)(Z,{"ab-test":g,"ab-variant":re?.[e]?re[e].toLowerCase():"a"})},x?.[e]?.name||(0,s.__)("Variant","kadence-insights")+" "+(e+1)))))),(0,a.createElement)(c.PanelBody,{title:(0,s.__)("Advanced","kadence-insights"),initialOpen:!1},(0,a.createElement)(c.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,autoComplete:"off",label:(0,s.__)("Additional CSS class(es)","kadence-insights"),value:V||"",help:(0,s.__)("Separate multiple classes with spaces.","kadence-insights"),onChange:e=>{B(e,"custom_classes")}}))),ae,(0,a.createElement)("div",{className:"kadence-ab-test-controls"},(0,a.createElement)(c.Icon,{className:"kab-block-select",label:(0,s.__)("A/B test block","kadence-insights"),icon:L,showTooltip:!0})),(0,a.createElement)("div",{...ce}))}function G({id:e,post:t,commit:n,postExists:l,clientId:c}){const[r,u]=(0,o.useState)(0),[p,g]=(0,o.useState)(""),[k,h]=C("kadence_ab_test","kadence_ab_test",p);let[_,b,v]=(0,d.useEntityBlockEditor)("postType","kadence_ab_test",{id:r});return(0,o.useEffect)((()=>{r&&(async e=>{v([(0,i.createBlock)("kadence-insights/ab-test",{},[(0,i.createBlock)("kadence-insights/ab-test-item",{},[])])],c),n(e)})(r)}),[r]),(0,a.createElement)("div",{className:"kadence-ab-intro-wrapper"},(0,a.createElement)(x,{postType:"kadence_ab_test",label:(0,s.__)("A/B Test","kadence-insights"),instructions:(0,s.__)("Select an existing test or create a new one.","kadence-insights"),placeholder:(0,s.__)("Select A/B Test","kadence-insights"),onSelect:n,isSelecting:e&&(0,m.isEmpty)(t)&&void 0!==l,onAdd:async()=>{try{const e=await h();e.id&&u(e.id)}catch(e){console.error(e)}},isAdding:k,title:p,setTitle:g}))}const j=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"kadence-insights/ab-test","title":"A/B Testing","category":"layout","description":"Create a simple A/B test with any section of content on your website.","supports":{"html":false,"customClassName":false,"reusable":false,"lock":false,"kbMetadata":true},"textdomain":"kadence-insights","keywords":["kb","a/b","test"],"attributes":{"id":{"type":"integer","default":0},"uniqueID":{"type":"string"},"visibleVariant":{"type":"integer","default":0},"variantsCount":{"type":"integer","default":1}},"providesContext":{"postId":"id","kadence/variantsCount":"variantsCount"}}');(0,i.registerBlockType)("kadence-insights/ab-test",{...j,title:(0,s.__)("A/B Testing","kadence-insights"),description:(0,s._x)("Create a simple A/B test with any section of content on your website.","block description","kadence-insights"),keywords:[(0,s.__)("a/b","kadence-insights"),(0,s.__)("a/b testing","kadence-insights"),(0,s.__)("optimize","kadence-insights"),"kb"],icon:{src:(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 24 24"},(0,a.createElement)("path",{fill:"var(--kadence-color, #0058b0)",d:"M1.475 5.59l-.069 4.599v9.633a.408.408 0 00.408.408h16.821a.406.406 0 00.408-.408l1.346.002v.322c0 .813-.664 1.475-1.475 1.475H1.475A1.477 1.477 0 010 20.146V7.064c0-.81.664-1.474 1.475-1.474zm13.568 3.34l-1.609 5.756a.123.123 0 01-.12.097h-.546a.12.12 0 01-.116-.152l1.61-5.756a.12.12 0 01.119-.098h.549c.009 0 .021.002.031.004.06.02.1.086.082.149zm3.762 5.578H17.27c-.223 0-.381-.049-.475-.149-.096-.099-.143-.257-.143-.474v-3.778c0-.22.049-.38.147-.476.097-.098.254-.147.471-.147h1.628c.241 0 .448.016.623.045.176.032.334.086.475.172a1.247 1.247 0 01.525.629c.049.133.073.27.073.416 0 .502-.252.871-.754 1.104.66.211.99.619.99 1.226 0 .281-.072.535-.217.76a1.276 1.276 0 01-.582.498 2.04 2.04 0 01-.527.135 5.376 5.376 0 01-.699.039zm-.076-2.231h-1.061v1.467h1.094c.689 0 1.033-.248 1.033-.744 0-.254-.088-.438-.268-.553-.177-.113-.445-.17-.798-.17zm-1.061-2.029v1.299h.934c.253 0 .449-.026.587-.072a.568.568 0 00.319-.274.628.628 0 00.086-.322c0-.254-.09-.422-.272-.506-.179-.084-.457-.125-.826-.125h-.828zm-7.25 3.691l-.24-.63H8.137l-.241.642c-.093.252-.173.422-.24.508-.066.088-.174.133-.324.133a.483.483 0 01-.34-.141.432.432 0 01-.146-.318c0-.069.011-.141.033-.213.023-.074.06-.174.113-.305l1.283-3.26c.038-.093.08-.205.133-.335.051-.133.106-.241.164-.329a.703.703 0 01.229-.211.698.698 0 01.351-.08.73.73 0 01.356.08c.096.055.17.124.228.207.059.084.108.176.147.274.039.098.092.226.152.389l1.313 3.24c.103.246.154.426.154.537a.45.45 0 01-.145.32.474.474 0 01-.351.145.444.444 0 01-.205-.043.45.45 0 01-.145-.115 1.006 1.006 0 01-.123-.227c-.045-.102-.082-.191-.115-.268zm-2.014-1.396h1.5l-.756-2.07-.744 2.07zM5.086 2.379h17.439c.813 0 1.475.664 1.475 1.475v13.082a1.48 1.48 0 01-1.475 1.474H5.086a1.48 1.48 0 01-1.475-1.474V3.854a1.477 1.477 0 011.475-1.475zm17.574 4.6H5.016v9.632a.408.408 0 00.408.409h16.82a.407.407 0 00.408-.409V6.979h.008zm-1.539-2.942a.73.73 0 110 1.458.73.73 0 010-1.458zm-4.939 0a.728.728 0 110 1.457.728.728 0 010-1.457zm2.468 0a.729.729 0 11.001 1.457.729.729 0 01-.001-1.457z"}))},edit:function(e){const{attributes:t,setAttributes:n,isSelected:i,context:u,clientId:p,className:g}=e,{id:k,uniqueID:h}=t,[_,b]=(0,o.useState)(!1),{post:v,postExists:E,isLoading:y,currentPostType:w,postId:f}=(0,r.useSelect)((e=>({post:k&&e(d.store).getEditedEntityRecord("postType","kadence_ab_test",k),postExists:k&&e(d.store).getEntityRecord("postType","kadence_ab_test",k),isLoading:e(d.store).isResolving("getEntityRecord",["postType","kadence_ab_test",k]),currentPostType:e("core/editor")?.getCurrentPostType()?e("core/editor")?.getCurrentPostType():"",postId:e("core/editor")?.getCurrentPostId()?e("core/editor")?.getCurrentPostId():""})),[k]),{isPreviewMode:B}=(0,r.useSelect)((e=>({isPreviewMode:e("core/block-editor").getSettings().__unstableIsPreviewMode})),[p]);if(B)return(0,a.createElement)(a.Fragment,null,"");(0,o.useEffect)((()=>{let e="_"+p.substr(2,9);h||n({uniqueID:e}),"kadence_ab_test"===w&&window.wp.data.dispatch("core/block-editor").setTemplateValidity(!0)}),[]);const C=z()({"kadence-ab-test-wrap":!0,[`kadence-ab-test-${k}`]:"kadence_ab_test"!==w&&k,[`kadence-ab-test-${f}`]:"kadence_ab_test"===w&&f}),I=(0,l.useBlockProps)({className:C});return"kadence_ab_test"===w?(0,a.createElement)("div",{...I},(0,a.createElement)(F,{...e,postExists:E,post:v,direct:!0,id:f})):(!_&&y&&b(!0),(0,a.createElement)("div",{...I},(0===k||void 0===E&&_&&!y)&&(0,a.createElement)(G,{id:k,postExists:E,post:v,commit:e=>n({id:e}),clientId:p}),k>0&&(0,m.isEmpty)(v)&&void 0===E&&y&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.Spinner,null),(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(c.PanelBody,{panelName:"kb-ab-test-selected-switch",title:(0,s.__)("Selected A/B Test","kadence-insights")},(0,a.createElement)(S,{postType:"kadence_ab_test",label:(0,s.__)("Selected A/B Test","kadence-insights"),hideLabelFromVision:!0,onChange:e=>{n({id:parseInt(e)})},value:k}),(0,a.createElement)(c.Button,{variant:"link",onClick:()=>{n({id:0})},style:{marginBottom:"10px"}},(0,s.__)("Create a New A/B Test","kadence-insights"))))),k>0&&!(0,m.isEmpty)(v)&&"trash"===v.status&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(G,{id:k,postExists:E,post:v,commit:e=>n({id:e}),clientId:p})),k>0&&!(0,m.isEmpty)(v)&&"trash"!==v.status&&(0,a.createElement)(d.EntityProvider,{kind:"postType",type:"kadence_ab_test",id:k},(0,a.createElement)(F,{...e,direct:!1,id:k}))))},save:()=>(0,a.createElement)(l.InnerBlocks.Content,null)})},942:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=l(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=l(t,n));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,s,i)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],i=e[d][2];for(var c=!0,r=0;r<n.length;r++)(!1&i||l>=i)&&Object.keys(a.O).every((e=>a.O[e](n[r])))?n.splice(r--,1):(c=!1,i<l&&(l=i));if(c){e.splice(d--,1);var o=s();void 0!==o&&(t=o)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={984:0,153:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,l=n[0],c=n[1],r=n[2],o=0;if(l.some((t=>0!==e[t]))){for(s in c)a.o(c,s)&&(a.m[s]=c[s]);if(r)var d=r(a)}for(t&&t(n);o<l.length;o++)i=l[o],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self.webpackChunkkadence_insights=self.webpackChunkkadence_insights||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[153],(()=>a(228)));s=a.O(s)})();